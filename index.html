<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kulucky so-on</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2196F3;
            --secondary-color: #f5f5f5;
            --background-color: #e3f2fd;
            --text-color: #333;
            --card-background: #fff;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --success-color: #4CAF50;
            --danger-color: #f44336;
            --highlight-color: #00796B;
        }
        body {
            font-family: 'Kanit', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
            font-size: 0.9rem;
        }
        .header {
            width: 100%;
            max-width: 800px;
            background-color: var(--card-background);
            box-shadow: 0 2px 10px var(--shadow-color);
            border-radius: 12px;
            padding: 10px 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }
        .header-title {
            text-align: center;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        .content-container {
            width: 100%;
            max-width: 800px;
            flex: 1;
            background-color: var(--card-background);
            box-shadow: 0 4px 15px var(--shadow-color);
            border-radius: 12px;
            box-sizing: border-box;
            padding: 15px;
            overflow-y: auto;
        }
        .initial-choice-section {
            text-align: center;
            margin-bottom: 20px;
        }
        .initial-choice-section p {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }
        .button-group button {
            width: 80%;
            max-width: 300px;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            background-color: var(--success-color);
            color: #fff;
        }
        .button-group button:hover {
            background-color: #388E3C;
        }
        .instruction-box-header {
            font-size: 0.9rem;
            line-height: 1.5;
            padding: 10px;
            background-color: #f1f8e9;
            border-left: 5px solid var(--success-color);
            border-radius: 4px;
        }
        .instruction-box-header h4 {
            margin: 0;
            font-size: 1rem;
            color: var(--success-color);
        }
        .instruction-box-header hr {
            border-color: #ddd;
            margin: 8px 0;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }
        .input-field-container {
            display: flex;
            flex-direction: column;
            width: 100%;
            gap: 8px;
        }
        .input-field-container label {
            white-space: nowrap;
            font-weight: 700;
            font-size: 1rem;
        }
        .input-field-container input, .input-field-container select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
            box-shadow: 0 2px 5px var(--shadow-color);
            transition: box-shadow 0.3s ease;
        }
        .input-field-container input:focus, .input-field-container select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 8px rgba(33, 150, 243, 0.4);
        }
        .action-button-group {
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            gap: 10px;
            width: 100%;
        }
        .action-button-group button {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        #analyzeCapitalBtn, #calculateRequiredCapitalBtn, #analyzeLossBtn {
            background-color: var(--primary-color);
            color: #fff;
        }
        #analyzeCapitalBtn:hover, #calculateRequiredCapitalBtn:hover, #analyzeLossBtn:hover {
            background-color: #1976D2;
        }
        .back-button {
            background-color: #607D8B;
            color: #fff;
        }
        .back-button:hover {
            background-color: #455A64;
        }
        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            border-bottom: 2px solid #eee;
            padding-bottom: 8px;
            margin-bottom: 15px;
        }
        .message-box {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        .important-note {
            background-color: #ffebee;
            color: var(--danger-color);
            border-left: 5px solid var(--danger-color);
            font-size: 1rem;
        }
        .instruction-box {
            background-color: #e3f2fd;
            border-left: 5px solid var(--primary-color);
            font-size: 1rem;
        }
        .result-item-main-line {
            font-size: 1.2rem;
            font-weight: 600;
            line-height: 1.4;
            color: var(--primary-color);
        }
        .capital-summary-green {
            background-color: #e8f5e9;
            border-left: 5px solid var(--success-color);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .capital-summary-green p {
            margin: 5px 0;
            line-height: 1.4;
        }
        .capital-summary-green .summary-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--success-color);
        }
        .instruction-blue {
            background-color: #e3f2fd;
            border-left: 5px solid var(--primary-color);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        .instruction-blue p {
            margin: 5px 0;
            line-height: 1.4;
        }
        .capital-bet-line {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 0 10px;
            box-sizing: border-box;
            max-width: 800px;
            margin-bottom: 10px;
        }
        .nav-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary-color);
        }
        .nav-menu {
            position: absolute;
            top: 60px;
            right: 15px;
            background-color: var(--card-background);
            box-shadow: 0 4px 15px var(--shadow-color);
            border-radius: 8px;
            z-index: 100;
            display: none;
            flex-direction: column;
            width: 200px;
            padding: 10px;
        }
        .nav-menu button {
            width: 100%;
            padding: 10px;
            margin-bottom: 5px;
            border: none;
            background-color: #e3f2fd;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-color);
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .nav-menu button:hover {
            background-color: #bbdefb;
        }
        .nav-menu button.active {
            background-color: var(--primary-color);
            color: #fff;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 99;
            display: none;
        }

        @media (max-width: 600px) {
            .button-group button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="top-nav" id="topNav" style="display: none;">
        <button id="homeBtn" class="nav-button">üè†</button>
        <button id="menuBtn" class="nav-button">‚ò∞</button>
    </div>
    <div class="overlay" id="overlay"></div>
    <div class="nav-menu" id="navMenu">
        <button id="navPage1">üìä ‡∏´‡∏ô‡πâ‡∏≤ 1: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button id="navPage2">üí∞ ‡∏´‡∏ô‡πâ‡∏≤ 2: ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</button>
        <button id="navPage3">üü¢ ‡∏´‡∏ô‡πâ‡∏≤ 3: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</button>
    </div>

    <header class="header" id="mainHeader">
        <div class="header-title">Kulucky so-on</div>
    </header>
    <div class="content-container" id="mainContainer">
        
        <div id="initialContent">
            <div class="initial-choice-section">
                <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå:</p>
                <div class="button-group">
                    <button id="showCapitalAnalysisBtn">1Ô∏è‚É£ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    <button id="showRequiredCapitalBtn">2Ô∏è‚É£ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</button>
                    <button id="showLossAnalysisBtn">3Ô∏è‚É£ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</button>
                </div>
            </div>
            <div class="instruction-box-header" style="margin-top: 20px;">
                <h4>‡∏Ñ‡∏≥‡∏ä‡∏µ‡πâ‡πÅ‡∏à‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</h4>
                <p>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠ "‡∏ñ‡∏≠‡∏ô‡∏ó‡∏∏‡∏ô‡∏Ñ‡∏∑‡∏ô" ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏á‡πÅ‡∏ö‡∏ö 1 ‡∏´‡∏•‡∏±‡∏Å 5 ‡∏ï‡∏±‡∏ß (‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡πà‡∏≥/‡∏™‡∏π‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Ñ‡∏π‡πà/‡∏Ñ‡∏µ‡πà)</p>
                <hr style="border-color:#ddd;">
                <p><b>[ ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏à‡∏≥ ]</b></p>
                <ul>
                    <li>*‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠ <b>"‡∏ñ‡∏≠‡∏ô‡∏ó‡∏∏‡∏ô‡∏Ñ‡∏∑‡∏ô"</b> ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô*</li>
                    <li>*‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á 5 ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏¥‡∏°‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ä‡∏ô‡∏∞*</li>
                    <li>*‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏ô‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ*</li>
                </ul>
            </div>
        </div>
        
        <div id="capitalAnalysisSection" style="display:none;">
            <div class="input-group">
                <div class="input-field-container">
                    <label for="totalCapitalInput">üí∏ ‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ:</label>
                    <input type="number" id="totalCapitalInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 500">
                </div>
                <div class="action-button-group">
                    <button id="analyzeCapitalBtn">üìä ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ó‡∏∏‡∏ô</button>
                </div>
            </div>
        </div>

        <div id="requiredCapitalSection" style="display:none;">
            <div class="input-group">
                <div class="input-field-container">
                    <label for="startBetInput">üéØ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ó‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞ (‡∏ö‡∏≤‡∏ó):</label>
                    <input type="number" id="startBetInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10">
                </div>
                <div class="input-field-container">
                    <label for="numPeriodsInput">üìÖ ‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ñ‡∏∂‡∏á (‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà):</label>
                    <select id="numPeriodsInput">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5" selected>5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </div>
                <div class="action-button-group">
                    <button id="calculateRequiredCapitalBtn">üí∞ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô</button>
                </div>
            </div>
        </div>

        <div id="lossAnalysisSection" style="display:none;">
            <div class="input-group">
                <div class="input-field-container">
                    <label for="totalLossInput">üí∞ ‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢‡πÑ‡∏õ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</label>
                    <input type="number" id="totalLossInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 75">
                </div>
                <div class="action-button-group">
                    <button id="analyzeLossBtn">üìä ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>
                </div>
            </div>
        </div>

        <div id="results" style="display:none;">
            <div id="resultsContent"></div>
        </div>
    </div>

    <script>
        const initialContent = document.getElementById('initialContent');
        const resultsDiv = document.getElementById('results');
        const resultsContent = document.getElementById('resultsContent');
        const showCapitalAnalysisBtn = document.getElementById('showCapitalAnalysisBtn');
        const showRequiredCapitalBtn = document.getElementById('showRequiredCapitalBtn');
        const showLossAnalysisBtn = document.getElementById('showLossAnalysisBtn');

        const capitalAnalysisSection = document.getElementById('capitalAnalysisSection');
        const totalCapitalInput = document.getElementById('totalCapitalInput');
        const analyzeCapitalBtn = document.getElementById('analyzeCapitalBtn');

        const requiredCapitalSection = document.getElementById('requiredCapitalSection');
        const startBetInput = document.getElementById('startBetInput');
        const numPeriodsInput = document.getElementById('numPeriodsInput');
        const calculateRequiredCapitalBtn = document.getElementById('calculateRequiredCapitalBtn');

        const lossAnalysisSection = document.getElementById('lossAnalysisSection');
        const totalLossInput = document.getElementById('totalLossInput');
        const analyzeLossBtn = document.getElementById('analyzeLossBtn');

        const homeBtn = document.getElementById('homeBtn');
        const menuBtn = document.getElementById('menuBtn');
        const navMenu = document.getElementById('navMenu');
        const overlay = document.getElementById('overlay');
        const navPage1Btn = document.getElementById('navPage1');
        const navPage2Btn = document.getElementById('navPage2');
        const navPage3Btn = document.getElementById('navPage3');
        
        const betMultiplier = 5;
        const betRatio = 9.9;
        const actualProfitRatio = betRatio - betMultiplier; // 4.9

        function formatNumber(num) {
            return (Math.round(num * 100) / 100).toFixed(2);
        }

        function showPage(pageId, activeNav = '') {
            initialContent.style.display = 'none';
            capitalAnalysisSection.style.display = 'none';
            requiredCapitalSection.style.display = 'none';
            lossAnalysisSection.style.display = 'none';
            resultsDiv.style.display = 'none';

            if (pageId === 'initialContent') {
                initialContent.style.display = 'block';
                document.getElementById('topNav').style.display = 'none';
                window.location.hash = '';
            } else {
                document.getElementById('topNav').style.display = 'flex';
                if (pageId === 'capitalAnalysisSection') {
                    capitalAnalysisSection.style.display = 'block';
                    window.location.hash = '#page1';
                } else if (pageId === 'requiredCapitalSection') {
                    requiredCapitalSection.style.display = 'block';
                    window.location.hash = '#page2';
                } else if (pageId === 'lossAnalysisSection') {
                    lossAnalysisSection.style.display = 'block';
                    window.location.hash = '#page3';
                } else if (pageId === 'results-1') { // Results for Page 1
                    resultsDiv.style.display = 'block';
                    window.location.hash = '#results1';
                } else if (pageId === 'results-2') { // Results for Page 2
                    resultsDiv.style.display = 'block';
                    window.location.hash = '#results2';
                } else if (pageId === 'results-3') { // Results for Page 3
                    resultsDiv.style.display = 'block';
                    window.location.hash = '#results3';
                }
            }
            
            // Highlight active button in nav menu
            document.querySelectorAll('.nav-menu button').forEach(btn => btn.classList.remove('active'));
            if (activeNav) {
                document.getElementById(activeNav).classList.add('active');
            }
            
            document.querySelector('body').scrollIntoView({ behavior: 'smooth' });
        }

        function analyzeCapital() {
            const inputCapital = parseFloat(totalCapitalInput.value);
            if (isNaN(inputCapital) || inputCapital <= 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }
            
            let startBet = Math.max(1, Math.floor(inputCapital / 200));
            
            let periods = 0;
            let cumulativeCost = 0;
            
            let currentBet = startBet;
            
            for(let i=1; i<=10; i++) {
                const nextTotalBet = currentBet * betMultiplier;
                const nextTotalCumulativeCost = cumulativeCost + nextTotalBet;
                if (nextTotalCumulativeCost > inputCapital) {
                    periods = i - 1;
                    break;
                }
                cumulativeCost = nextTotalCumulativeCost;
                periods = i;
                currentBet = Math.ceil(cumulativeCost / actualProfitRatio);
            }

            const startTotalBet = startBet * betMultiplier;
            const profitAfterFirstWin = startBet * actualProfitRatio;
            const lossAfterFirstRound = startTotalBet;
            
            let resultHtml = `
                <div class="capital-summary-green">
                    <p class="summary-title">üìä ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                    <hr>
                    <p>‚ö†Ô∏è ‡∏ó‡∏∏‡∏ô ${formatNumber(inputCapital)} ‡∏ö‡∏≤‡∏ó‡∏ô‡∏µ‡πâ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ${periods} ‡∏á‡∏ß‡∏î</p>
                </div>
                <div class="instruction-blue">
                    <p style="font-size: 1.2rem; font-weight: 700; color: var(--success-color);">üéØ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ó‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞ ${startBet} (‡∏£‡∏ß‡∏° ${startTotalBet} ‡∏ö‡∏≤‡∏ó)</p>
                    <p>‚úÖ ‡∏ñ‡πâ‡∏≤‡∏ä‡∏ô‡∏∞: ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£ ${formatNumber(profitAfterFirstWin)} ‡∏ö‡∏≤‡∏ó</p>
                    <p>‚ùå ‡∏ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢: ‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô ${formatNumber(lossAfterFirstRound)} ‡∏ö‡∏≤‡∏ó</p>
                </div>
                <p style="margin-top:20px; font-weight:600; font-size:1.1rem; color: #555;">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ:</p>
            `;
            
            currentBet = startBet;
            cumulativeCost = 0;
            for (let i = 1; i <= 10; i++) {
                const nextTotalBet = currentBet * betMultiplier;
                
                let lineText;
                if(i > periods && periods > 0) {
                     lineText = `<div class="capital-bet-line" style="color: var(--danger-color);">‚ùóÔ∏è ‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà ${i} ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô ${currentBet} (‡∏£‡∏ß‡∏° ${nextTotalBet} ‡∏ö‡∏≤‡∏ó)</div>`;
                } else {
                    lineText = `<div class="capital-bet-line" style="color: var(--primary-color);">‚ùå ‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà ${i} (‡∏ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢): ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞ ${currentBet} (‡∏£‡∏ß‡∏° ${nextTotalBet} ‡∏ö‡∏≤‡∏ó)</div>`;
                }
                
                if (i === periods + 1 && periods > 0) {
                     resultHtml += `
                        <div class="message-box important-note">
                            ‚ùóÔ∏è ‡∏ó‡∏∏‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏ß‡∏î‡∏ñ‡∏±‡∏î‡πÑ‡∏õ!
                        </div>
                    `;
                }
                resultHtml += lineText;
                
                cumulativeCost += nextTotalBet;
                currentBet = Math.ceil(cumulativeCost / actualProfitRatio);
            }
            
            resultsContent.innerHTML = resultHtml;
            showPage('results-1', 'navPage1');
        }

        function calculateRequiredCapital() {
            const startBet = parseFloat(startBetInput.value);
            const numPeriods = parseInt(numPeriodsInput.value);
            if (isNaN(startBet) || startBet <= 0 || isNaN(numPeriods) || numPeriods <= 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }

            let cumulativeCost = 0;
            let currentBet = startBet;
            for (let i = 1; i <= numPeriods; i++) {
                const totalBet = currentBet * betMultiplier;
                cumulativeCost += totalBet;
                currentBet = Math.ceil(cumulativeCost / actualProfitRatio);
            }
            
            let resultHtml = `
                <div class="capital-summary-green">
                    <p class="summary-title">üí∞ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</p>
                    <hr>
                    <p>üéØ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ó‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞ ${startBet} ‡∏ö‡∏≤‡∏ó</p>
                    <p>‚ö†Ô∏è ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà ${numPeriods}</p>
                    <p style="font-size: 1.2rem; font-weight: 700;">üü¢ ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${formatNumber(cumulativeCost)} ‡∏ö‡∏≤‡∏ó üü¢</p>
                </div>
                <p style="margin-top:20px; font-weight:600; font-size:1.1rem; color: #555;">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ:</p>
            `;
            
            currentBet = startBet;
            cumulativeCost = 0;
            for (let i = 1; i <= 10; i++) {
                const totalBet = currentBet * betMultiplier;
                
                if(i > numPeriods && i === numPeriods + 1){
                    resultHtml += `
                        <div class="message-box important-note">
                            ‚ùóÔ∏è ‡∏´‡∏≤‡∏Å‡∏ó‡∏∏‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏ß‡∏î‡∏ñ‡∏±‡∏î‡πÑ‡∏õ!
                        </div>
                    `;
                }
                
                let lineText;
                if(i > numPeriods){
                     lineText = `<div class="capital-bet-line" style="color: var(--danger-color);">‚ùóÔ∏è ‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà ${i} ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô ${currentBet} (‡∏£‡∏ß‡∏° ${totalBet} ‡∏ö‡∏≤‡∏ó)</div>`;
                } else {
                    lineText = `<div class="capital-bet-line" style="color: var(--primary-color);">‚ùå ‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà ${i} (‡∏ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢): ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ó‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞ ${currentBet} (‡∏£‡∏ß‡∏° ${totalBet} ‡∏ö‡∏≤‡∏ó)</div>`;
                }

                resultHtml += lineText;
                cumulativeCost += totalBet;
                currentBet = Math.ceil(cumulativeCost / actualProfitRatio);
            }

            resultsContent.innerHTML = resultHtml;
            showPage('results-2', 'navPage2');
        }

        function analyzeLoss() {
            const inputLoss = parseFloat(totalLossInput.value);
            if (isNaN(inputLoss) || inputLoss <= 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }

            resultsContent.innerHTML = '';

            let resultHtml = `
                <div class="capital-summary-green">
                    <p class="summary-title">üü¢ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
                    <hr>
                    <p>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏î‡∏ó‡∏∏‡∏ô‡∏™‡∏∞‡∏™‡∏°: <span style="font-size: 1.2rem; font-weight: 700;">${formatNumber(inputLoss)} ‡∏ö‡∏≤‡∏ó</span></p>
                </div>
                <p style="margin-top:20px; font-weight:600; font-size:1.1rem; color: #555;">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ô‡∏µ‡πâ:</p>
            `;
            
            let cumulativeCost = inputLoss;
            let currentBet = Math.ceil(cumulativeCost / actualProfitRatio);

            for (let i = 1; i <= 10; i++) {
                const nextTotalBet = currentBet * betMultiplier;
                resultHtml += `<div class="capital-bet-line">üéØ ‡∏á‡∏ß‡∏î‡∏ó‡∏µ‡πà ${i}: ‡πÅ‡∏ó‡∏á‡∏ï‡∏±‡∏ß‡∏•‡∏∞ ${currentBet} (‡∏£‡∏ß‡∏° ${nextTotalBet} ‡∏ö‡∏≤‡∏ó)</div>`;
                cumulativeCost += nextTotalBet;
                currentBet = Math.ceil(cumulativeCost / actualProfitRatio);
            }
            
            resultsContent.innerHTML = resultHtml;
            showPage('results-3', 'navPage3');
        }

        function handleHashChange() {
            const hash = window.location.hash;
            if (hash === '#page1') {
                showPage('capitalAnalysisSection', 'navPage1');
            } else if (hash === '#page2') {
                showPage('requiredCapitalSection', 'navPage2');
            } else if (hash === '#page3') {
                showPage('lossAnalysisSection', 'navPage3');
            } else if (hash === '#results1') {
                analyzeCapital(); // Re-run analysis to restore content
            } else if (hash === '#results2') {
                calculateRequiredCapital(); // Re-run analysis to restore content
            } else if (hash === '#results3') {
                analyzeLoss(); // Re-run analysis to restore content
            } else {
                showPage('initialContent');
            }
        }
        
        window.addEventListener('hashchange', handleHashChange);
        window.addEventListener('load', handleHashChange);

        showCapitalAnalysisBtn.addEventListener('click', () => showPage('capitalAnalysisSection', 'navPage1'));
        showRequiredCapitalBtn.addEventListener('click', () => showPage('requiredCapitalSection', 'navPage2'));
        showLossAnalysisBtn.addEventListener('click', () => showPage('lossAnalysisSection', 'navPage3'));

        homeBtn.addEventListener('click', () => showPage('initialContent'));
        menuBtn.addEventListener('click', () => {
            navMenu.style.display = navMenu.style.display === 'flex' ? 'none' : 'flex';
            overlay.style.display = navMenu.style.display === 'flex' ? 'block' : 'none';
        });
        overlay.addEventListener('click', () => {
            navMenu.style.display = 'none';
            overlay.style.display = 'none';
        });

        navPage1Btn.addEventListener('click', () => {
            showPage('capitalAnalysisSection', 'navPage1');
            navMenu.style.display = 'none';
            overlay.style.display = 'none';
        });
        navPage2Btn.addEventListener('click', () => {
            showPage('requiredCapitalSection', 'navPage2');
            navMenu.style.display = 'none';
            overlay.style.display = 'none';
        });
        navPage3Btn.addEventListener('click', () => {
            showPage('lossAnalysisSection', 'navPage3');
            navMenu.style.display = 'none';
            overlay.style.display = 'none';
        });
        
        analyzeCapitalBtn.addEventListener('click', analyzeCapital);
        calculateRequiredCapitalBtn.addEventListener('click', calculateRequiredCapital);
        analyzeLossBtn.addEventListener('click', analyzeLoss);
    </script>
</body>
</html>
